<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich" template="layout/template.xhtml">
	<ui:define name="body">
	<rich:tabPanel switchType="client">
	<rich:tab header="Students">
		
			<rich:dataTable var="student" value="#{studentMgr.students}"
				id="stdTbl" onRowMouseOver="this.style.backgroundColor='#CCCCCC'"
				style="width:100%"
				onRowMouseOut="this.style.backgroundColor='#FFFFFF'" rows="10"
				rowKeyVar="rowKey">
				<f:facet name="header">
					<rich:columnGroup>
						<rich:column>
							<h:outputText value="S No." />
						</rich:column>
						<rich:column>
							<h:outputText value="First name" />
						</rich:column>
						<rich:column>
							<h:outputText value="Last name" />
						</rich:column>						
						<rich:column>
							<h:outputText value="Email Id" />
						</rich:column>
						<rich:column>
							<h:outputText value="Phone Number" />
						</rich:column>
						<rich:column>
							<h:outputText value="Program Entry Date" />
						</rich:column>
						<rich:column>
							<h:outputText value="GMAT / GRE Score" />
						</rich:column>
						<rich:column>
							<h:outputText value="Address" />
						</rich:column>
						<rich:column>
							<h:outputText value="Status" />
						</rich:column>
						
						<rich:column>
							<h:outputText value="Actions" />
						</rich:column>
					</rich:columnGroup>
				</f:facet>
				<rich:column>
					<h:outputText value="#{rowKey+1}" />
				</rich:column>
				<rich:column>
					<h:outputText value="#{student.firstName}" />
				</rich:column>
				<rich:column>
					<h:outputText value="#{student.lastName}" />
				</rich:column>
				
				<rich:column>
					<h:outputText value="#{student.otherMail}" />
				</rich:column>
				<rich:column>
					<h:outputText value="#{student.phoneNumber}" />
				</rich:column>
				<rich:column>
					<h:outputText value="#{student.entryDate}">
						<f:convertDateTime pattern="dd/MM/yy" locale="en_US" type="both"
							timeZone="IST" />
					</h:outputText>
				</rich:column>
				<rich:column>
					<h:outputText value="#{student.greScore}" />
				</rich:column>
				
				<rich:column>
					<h:outputText value="#{student.mailingAddress}" />
				</rich:column>
				
				<rich:column>
					
				</rich:column>
				<rich:column>
					<rich:dropDownMenu mode="ajax">
						<f:facet name="label">
							<h:panelGrid cellpadding="0" cellspacing="0" columns="2"
								style="vertical-align:middle">
								<h:graphicImage value="/img/edit.gif" alt="edit" />
							</h:panelGrid>
						</f:facet>
						<rich:menuItem mode="ajax">
							<h:outputText value="Generate E-mail" />
						</rich:menuItem>					
						
						<rich:menuItem mode="ajax">
							<h:outputText value="Approved for graduation" />
						</rich:menuItem>
						
						<rich:menuItem mode="ajax">
							<h:outputText value="Withdrawn from program" />
						</rich:menuItem>
						
						<rich:menuItem mode="ajax">
							<h:outputText value="Accepted into program" />
						</rich:menuItem>
						
						<rich:menuItem mode="ajax">
							<h:outputText value="Edit" />
						</rich:menuItem>
					</rich:dropDownMenu>
				</rich:column>

			</rich:dataTable>
			<br />
			<rich:dataScroller for="stdTbl" maxPages="3" fastStep="3" />
			<br />

			<a4j:commandButton value="Add Student"
				action="#{studentMgr.addStudent}" execute="@this" render="out">
			</a4j:commandButton>

			<a4j:outputPanel id="out">
				<rich:popupPanel id="studentPopup" modal="true" resizeable="false"
					show="#{studentMgr.showStudnt}" domElementAttachment="form"
					autosized="true">
					<f:facet name="header">
						<h:outputText value="Add Student" />
					</f:facet>

					<f:facet name="controls">
						<a4j:commandLink action="#{studentMgr.closeDialog}"
							execute="@this" render="@form">
							<h:graphicImage value="/img/close.png" alt="close"
								style="margin-top: -1px;" />
						</a4j:commandLink>
					</f:facet>

					<h:panelGrid id="panel" columns="4" border="1" cellpadding="5">

						<h:column>
							<h:outputLabel value="First Name" />
						</h:column>

						<h:column>
							<h:inputText value="#{studentMgr.student.firstName}" />
						</h:column>
						<h:column>
							<h:outputLabel value="Last Name" />
						</h:column>

						<h:column>
							<h:inputText value="#{studentMgr.student.lastName}" />
						</h:column>

						<h:column>
							<h:outputLabel value="UCM Mailing Address" />
						</h:column>

						<h:column>
							<h:inputText value="#{studentMgr.student.ucmMail}" />
						</h:column>

						<h:column>
							<h:outputLabel value="Phone Number" />
						</h:column>

						<h:column>
							<h:inputText value="#{studentMgr.student.phoneNumber}" />
						</h:column>

						<h:column>
							<h:outputLabel value="Email Address" />
						</h:column>

						<h:column>
							<h:inputText value="#{studentMgr.student.otherMail}" />
						</h:column>

						<h:column>
							<h:outputLabel value="Concentration" />
						</h:column>

						<h:column>
							<h:selectOneMenu
								value="#{studentMgr.stdConcentration.concentration.concentrationId}"
								style="width: 100%;">
								<f:selectItems value="#{studentMgr.concentrations}" />
							</h:selectOneMenu>
						</h:column>


						<h:column>
							<h:outputLabel value="Entry Date" />
						</h:column>

						<h:column>
							<rich:calendar value="#{studentMgr.student.entryDate}"
								id="calendar" datePattern="d/M/yy HH:mm" style="width:200px">
							</rich:calendar>
						</h:column>

						<h:column>
							<h:outputLabel value="GRE / GMAT Score" />
						</h:column>

						<h:column>
							<h:inputText value="#{studentMgr.student.greScore}" />
						</h:column>

						<h:column>
							<h:outputLabel value="Mailing Address" />
						</h:column>

						<h:column>
							<h:inputTextarea cols="20" rows="10"
								value="#{studentMgr.student.mailingAddress}" />
						</h:column>
					</h:panelGrid>
					<h:panelGroup style="display:block; text-align:right">
						<a4j:commandButton id="studentSave" value="Save"
							action="#{studentMgr.saveStudent}" execute="@this,out"
							render="@form" />
						<a4j:commandButton id="cancel" value="Cancel"
							action="#{studentMgr.closeDialog}" render="@form" />
					</h:panelGroup>
				</rich:popupPanel>
			</a4j:outputPanel>
		
		</rich:tab>
		
		<rich:tab header="Not completed academic students">
		</rich:tab>
	</rich:tabPanel>
	</ui:define>
</ui:composition>
