<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:ui="http://java.sun.com/jsf/facelets" 
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    template="layout/template.xhtml">

<ui:define name="body">

   

        <rich:panel style="width: 500px;margin-left: 30%;">
            <f:facet name="header">User(s)</f:facet>
              <h:inputText id="userSearch" value="#{userMgr.searchKey}">
              </h:inputText>              
              <h:commandButton id="searchBtn" value="Search" action="#{userMgr.searchUsers}" 
              		update="userForm:userTable" style="margin-left: 5px;"/>
              <h:commandButton id="resetBtn" value="Reset" action="#{userMgr.loadUsers}" 
              		update="userForm:userTable" style="margin-left: 5px;"/>
              <br/><br/>
			<rich:dataTable var="user" value="#{userMgr.userList}" id="userTable" rows="10"
				rowKeyVar="rowKey">
	        <f:facet name="header">
	            <rich:columnGroup>	            
		            <rich:column>
		                <h:outputText value="S No." />
		            </rich:column>				
	                <rich:column>
	                	<h:outputText value="User name" />
	                </rich:column>
	                <rich:column>
	                    <h:outputText value="Login Id" />
	                </rich:column>
	                <rich:column>
	                    <h:outputText value="Role" />
	                </rich:column>
	                <rich:column>
	                    <h:outputText value="Email Id" />
	                </rich:column>
	                <rich:column>
	                    <h:outputText value="Active" />
	                </rich:column>                
	            </rich:columnGroup>
	        </f:facet>
	        <rich:column>
                <h:outputText value="#{rowKey+1}" />               
            </rich:column>
	        <rich:column>
                <h:outputText value="#{user.userName}" />               
            </rich:column>
            <rich:column>
                <h:outputText value="#{user.loginId}" />                   
            </rich:column>
            <rich:column>
                <h:outputText value="#{user.role}" />                   
            </rich:column>
             <rich:column>
                <h:outputText value="#{user.emailId}" />                   
            </rich:column>
            <rich:column>
                <h:outputText value="#{user.active}" />               
            </rich:column>
	        
        	</rich:dataTable>
        	<br/>
        	<rich:dataScroller for="userTable" maxPages="5" fastStep="3"/>
        	<br/>
        		
        	 <a4j:commandButton value="Add User" action="#{userMgr.showDialog}"
        	 	execute="@this" render="out">        		
   			 </a4j:commandButton>
    
        </rich:panel>
        
        
        <a4j:outputPanel id="out">
		<rich:popupPanel modal="true" resizeable="true" show="#{userMgr.showUserPopup}" domElementAttachment="form">
	        <f:facet name="header">
	            <h:outputText value="Add User" />
	        </f:facet>
	        <f:facet name="controls">
	            <h:outputLink value="#" onclick="#{rich:component('popup')}.hide(); return false;" style="color: inherit">
	                X
	            </h:outputLink>
	        </f:facet>
	        <h:panelGrid columns="2">
	        	<h:column>
		        	<h:outputLabel for="username">User name :</h:outputLabel>
		        </h:column>
		        <h:column>
		        	<h:inputText id="username" value="#{userMgr.user.userName}" />
		        </h:column>
		        <h:column>
	            	<h:outputLabel for="loginId">Login Id :</h:outputLabel>
	            </h:column>
	            
	            <h:column>
	            	<h:inputText id="loginId" value="#{userMgr.user.loginId}"/>
	            </h:column>
	            
	            <h:column>
	            	<h:outputLabel for="role">Role :</h:outputLabel>
	            </h:column>
	            <h:column>
		        	<h:inputText id="role" value="#{userMgr.user.role}"/>
		        </h:column>
		        
		        <h:column>
		        	<h:outputLabel for="email">Email Id :</h:outputLabel>
		        </h:column>
		        
		        <h:column>
		        	<h:inputText id="email" value="#{userMgr.user.emailId}"/>
		        </h:column>
		        
		        
		       
	        </h:panelGrid>
	        <br/>
	        <a4j:commandButton id="userSave" value="Save" action="#{userMgr.addUser}" execute="@this,out"
	        	render="@form"/>
	    </rich:popupPanel>
	    </a4j:outputPanel>
  
 </ui:define>
</ui:composition>
